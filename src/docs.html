<!-- docs.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documentation Viewer</title>
</head>
<body>

  <h1>Documentation Viewer</h1>

  <!-- Sidebar for navigation -->
  <div id="sidebar-container"></div>

  <!-- Placeholder for displaying documentation -->
  <div id="documentation-container"></div>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script src="db.js"></script>
  <script>
    // Function to fetch and display documentation
    async function fetchDocumentation(path) {
      try {
        const doc = await db.getDocumentation(path);

        if (!doc) {
          console.error('Documentation not found');
          return;
        }

        // Display the documentation in a container
        const container = document.getElementById('documentation-container');
        container.innerHTML = `
          <h2>${doc.title}</h2>
          <p>${doc.content}</p>
          <p>Author: ${doc.author}</p>
        `;
      } catch (error) {
        console.error('Error fetching documentation:', error);
      }
    }

    // Function to render the sidebar
    async function renderSidebar() {
      try {
        const sidebar = await db.getSidebar();

        // Display the sidebar in a container
        const sidebarContainer = document.getElementById('sidebar-container');
        sidebarContainer.innerHTML = `
          <ul>
            ${sidebar.map((path) => `<li><a href="#" onclick="fetchDocumentation('${path}')">${path}</a></li>`).join('')}
          </ul>
        `;
      } catch (error) {
        console.error('Error fetching sidebar:', error);
      }
    }

    // Fetch and display the sidebar when the page loads
    window.onload = () => {
      renderSidebar();
    };
  </script>

</body>
</html>
